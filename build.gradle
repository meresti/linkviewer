group 'linkviewer'
version '1.0-SNAPSHOT'

apply plugin: 'java'
apply plugin: 'idea';

buildscript {
    repositories {
        mavenCentral()
    }
    dependencies {
        classpath 'com.bmuschko:gradle-tomcat-plugin:2.2.3'
    }
}

project(':core') {
}

project(':ux') {

    def tomcatVersion = '7.0.59'

    apply plugin: 'war'
    apply plugin: 'com.bmuschko.tomcat'

    dependencies {
        compile project(':core')
//        testCompile project(path: ':core', configuration: 'tests')

        tomcat "org.apache.tomcat.embed:tomcat-embed-core:${tomcatVersion}",
                "org.apache.tomcat.embed:tomcat-embed-logging-juli:${tomcatVersion}",
                "org.apache.tomcat.embed:tomcat-embed-jasper:${tomcatVersion}"
    }


    tomcat {
        httpPort = 8090
        httpsPort = 8091
        enableSSL = true
        contextPath = 'linkviewer'
    }
}

configure(allprojects) { project ->
    apply plugin: "java"

    repositories {
        mavenCentral()
    }

    dependencies {
        compile 'org.springframework:spring-context:4.2.3.RELEASE'

        testCompile 'junit:junit:4.12'
        testCompile 'org.hamcrest:hamcrest-core:1.3'
        testCompile 'org.hamcrest:hamcrest-library:1.3'
        testCompile 'org.mockito:mockito-all:1.10.19'
    }
}

configure(rootProject) {
    task wrapper(type: Wrapper) {
        description = "Generates gradlew[.bat] scripts"
        gradleVersion = "2.9"
    }
}

idea {
    project {
        jdkName = sourceCompatibility
        languageLevel = sourceCompatibility
    }
}